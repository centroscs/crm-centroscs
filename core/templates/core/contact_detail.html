{% extends "core/base.html" %}
{% block title %}Contatto{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="h4 mb-0">{{ contact.full_name }}</h1>
  <div class="d-flex gap-2">
    <a class="btn btn-outline-secondary btn-sm" href="{% url 'contacts_list' %}">Indietro</a>
    <a class="btn btn-primary btn-sm" href="{% url 'contact_edit' contact.pk %}">Modifica</a>
  </div>
</div>

<div class="card">
  <div class="card-body">
{# ================= EMAIL ================= #}
<div class="d-flex align-items-center justify-content-between mb-2">
  <div>
    <strong>Email:</strong>
    {{ contact.email|default:"‚Äî" }}
  </div>

  {% if contact.email %}
    <a class="btn btn-sm btn-outline-primary"
       href="mailto:{{ contact.email|urlencode }}?subject={{ 'Richiesta informazioni'|urlencode }}">
      ‚úâÔ∏è Scrivi
    </a>
  {% endif %}
</div>

{# ================= WHATSAPP ================= #}
{% if contact.phone %}
  {% with wa=contact.phone|cut:" "|cut:"-"|cut:"("|cut:")"|cut:"." %}
  <div class="d-flex align-items-center justify-content-between">
    <div>
      <strong>Telefono:</strong>
      {{ contact.phone }}
    </div>

    <a class="btn btn-sm btn-outline-success"
       href="https://wa.me/{{ wa }}"
       target="_blank" rel="noopener">
      üí¨ WhatsApp
    </a>
  </div>
  {% endwith %}
{% else %}
  <div><strong>Telefono:</strong> ‚Äî</div>
{% endif %}
    <hr>
    <div class="text-muted small"><strong>Creato:</strong> {{ contact.created_at }}</div>
    <div class="text-muted small"><strong>Aggiornato:</strong> {{ contact.updated_at }}</div>
  </div>
</div>
{% endblock %}

